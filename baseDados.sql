USE master;
GO

DROP DATABASE IF EXISTS ESCOLA 
CREATE DATABASE ESCOLA;
GO

USE ESCOLA;
GO

CREATE TABLE MATERIA(
	ID_MATERIA BIGINT PRIMARY KEY NOT NULL,
	NOME_MATERIA CHAR(30) NOT NULL
)

CREATE TABLE ALUNO(
	ID_ALUNO BIGINT PRIMARY KEY NOT NULL,
	NOME_ALUNO CHAR(50) NOT NULL,
	DT_NASC DATE NOT NULL,
	END_ALUNO CHAR(80) NOT NULL,
	CIDADE_ALUNO CHAR(30) NOT NULL,
	ESTADO_ALUNO CHAR(30) NOT NULL
)

CREATE TABLE PROFESSOR(
	IDPROFESSOR BIGINT PRIMARY KEY NOT NULL,
	NOME_PROFESSOR CHAR(50) NOT NULL,
	DT_NASC_PROF DATE NOT NULL,
	RG_PROF CHAR(12) NOT NULL,
	ID_MATERIA BIGINT FOREIGN KEY REFERENCES MATERIA(ID_MATERIA)
)

CREATE TABLE NOTA(
	ID_NOTA BIGINT PRIMARY KEY NOT NULL,
	NOTA DECIMAL(2,1),
	ID_ALUNO BIGINT FOREIGN KEY REFERENCES ALUNO(ID_ALUNO),
	ID_MATERIA BIGINT FOREIGN KEY REFERENCES MATERIA(ID_MATERIA),
	IDPROFESSOR BIGINT FOREIGN KEY REFERENCES PROFESSOR(IDPROFESSOR)
)

INSERT INTO MATERIA VALUES(1,'MATEMATICA')
INSERT INTO MATERIA VALUES(2,'PORTUGUÊS')
INSERT INTO MATERIA VALUES(3,'HISTORIA')
INSERT INTO MATERIA VALUES(4,'CIENCIAS')
INSERT INTO MATERIA VALUES(5,'FISICA')

INSERT INTO ALUNO VALUES(1,'GUILHERME','1995-04-26','RUA SP','SÃO CAETANO DO SUL', 'SÃO PAULO')
INSERT INTO ALUNO VALUES(2,'JOAO','1996-03-30','RUA Y','SÃO CAETANO DO SUL','SÃO PAULO')

INSERT INTO PROFESSOR VALUES (1,'MAURICIO','1978-06-25','546789003212',2)
INSERT INTO PROFESSOR VALUES (2,'LUCAS','1987-05-20','546789005678',2)
INSERT INTO PROFESSOR VALUES (3,'MARCELO','1990-06-23','546789003123',1)
INSERT INTO PROFESSOR VALUES (4,'JULIANO','1983-05-20','546789005444',3)

INSERT INTO NOTA VALUES(1,6.0,1,2,1)
INSERT INTO NOTA VALUES(2,8.0,1,1,3)
INSERT INTO NOTA VALUES(3,9.5,2,1,3)
INSERT INTO NOTA VALUES(4,9.0,2,3,4)

SELECT * FROM NOTA

SELECT A.NOME_ALUNO AS ALUNOS, B.NOME_MATERIA AS MATERIAS, 
C.NOME_PROFESSOR AS PROFESSORES, D.NOTA AS NOTAS FROM
ALUNO A INNER JOIN NOTA D ON D.ID_ALUNO = A.ID_ALUNO
INNER JOIN MATERIA B ON D.ID_MATERIA = B.ID_MATERIA
INNER JOIN PROFESSOR C ON D.IDPROFESSOR = C.IDPROFESSOR
